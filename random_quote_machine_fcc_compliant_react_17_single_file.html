<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Random Quote Machine (React 17)</title>
  <!-- Fonts & basic styling -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0f172a; /* slate-900 */
      --card: #111827; /* gray-900 */
      --text: #e5e7eb; /* gray-200 */
      --muted: #9ca3af; /* gray-400 */
      --accent: #22c55e; /* green-500 */
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 20% 10%, #0b1220, var(--bg));
      color: var(--text);
      display: flex;
      align-items: center;        /* vertical center */
      justify-content: center;    /* horizontal center (User Story #11) */
      padding: 24px;
    }
    #quote-box {
      width: min(680px, 92vw);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05);
      padding: 28px 28px 18px;
      backdrop-filter: blur(6px);
    }
    .row { display:flex; gap: 12px; flex-wrap: wrap; align-items: center; }
    .space { height: 10px; }
    #text { font-size: clamp(22px, 3vw, 30px); line-height: 1.35; font-weight: 800; }
    #author { color: var(--muted); font-weight: 600; margin-top: 8px; }
    .btn {
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.1);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      text-decoration: none;
      font-weight: 600;
      display: inline-flex; align-items: center; gap: 8px;
      cursor: pointer;
      transition: transform .08s ease, background .2s ease, box-shadow .2s ease;
      box-shadow: 0 6px 20px rgba(0,0,0,.2);
    }
    .btn:hover { background: rgba(255,255,255,0.12); }
    .btn:active { transform: translateY(1px); }
    #new-quote { background: var(--accent); color: #06240f; border-color: transparent; }
    #new-quote:hover { filter: brightness(1.05); }
    .tag { font-size: 12px; padding: 4px 8px; border-radius: 999px; background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08); }
    footer { margin-top: 14px; font-size: 12px; color: var(--muted); text-align: right; }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React 17 to avoid FCC test incompatibilities with React 18 -->
  <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <script type="text/babel">
    const QUOTES = [
      { text: "Programs must be written for people to read, and only incidentally for machines to execute.", author: "Harold Abelson" },
      { text: "Talk is cheap. Show me the code.", author: "Linus Torvalds" },
      { text: "Simplicity is the soul of efficiency.", author: "Austin Freeman" },
      { text: "First, solve the problem. Then, write the code.", author: "John Johnson" },
      { text: "Before software can be reusable it first has to be usable.", author: "Ralph Johnson" },
      { text: "Premature optimization is the root of all evil.", author: "Donald Knuth" },
      { text: "If you can't explain it simply, you don't understand it well enough.", author: "Albert Einstein" },
      { text: "Any fool can write code that a computer can understand. Good programmers write code that humans can understand.", author: "Martin Fowler" },
      { text: "Code is like humor. When you have to explain it, it’s bad.", author: "Cory House" },
      { text: "Make it work, make it right, make it fast.", author: "Kent Beck" }
    ];

    function getRandomIndex(excludeIndex = -1) {
      if (QUOTES.length === 1) return 0;
      let i;
      do { i = Math.floor(Math.random() * QUOTES.length); } while (i === excludeIndex);
      return i;
    }

    function buildTweetURL(quote, author) {
      const text = `"${quote}" — ${author}`;
      const url = new URL("https://twitter.com/intent/tweet");
      url.searchParams.set("text", text);
      return url.toString();
    }

    function QuoteMachine() {
      const [index, setIndex] = React.useState(() => getRandomIndex()); // User Story #6 & #7
      const q = QUOTES[index];

      const next = () => setIndex(prev => getRandomIndex(prev)); // User Story #8 & #9

      const tweetHref = React.useMemo(() => buildTweetURL(q.text, q.author), [index]); // User Story #10

      return (
        <main id="quote-box">{/* User Story #1 */}
          <div className="row" style={{justifyContent:'space-between'}}>
            <span className="tag">Random Quote Machine</span>
            <button id="new-quote" className="btn" onClick={next} aria-label="Get a new quote">{/* User Story #4 */}
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" aria-hidden="true"><path d="M21 12a9 9 0 1 1-3-6.7"/><path d="M21 3v7h-7"/></svg>
              New Quote
            </button>
          </div>

          <div className="space"/>

          <section>
            <div id="text">{/* User Story #2 */}
              {q.text}
            </div>
            <div id="author">{/* User Story #3 */}
              — {q.author}
            </div>
          </section>

          <div className="space"/>

          <div className="row" style={{justifyContent:'space-between'}}>
            <a
              id="tweet-quote"             /* User Story #5 */
              className="btn"
              href={tweetHref}              /* User Story #10 */
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Tweet this quote"
            >
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" aria-hidden="true"><path d="M22 4s-.7 2.1-2 3.2c1.6 12.2-12.8 12.8-16 7.8 1.9.2 3.8-.5 5.2-1.8-2.2-.1-3.1-1.5-3.6-2.9.6.1 1.2.1 1.8-.1-2.3-.5-3.2-2.4-3.1-3.4.5.3 1.1.5 1.8.5C4 6.3 4.7 4.6 6.1 4c2.1 3.3 5.3 4.1 8.1 4.1.2-1.9 2.1-3.6 3.8-3.6.8 0 1.5.3 2 .9.6-.1 1.3-.4 1.9-.8-.2.7-.8 1.3-1.4 1.7.6-.1 1.2-.2 1.8-.5z"/></svg>
              Tweet
            </a>
          </div>

          <footer>
            Built with <strong>React 17</strong> to match FCC tests.
          </footer>
        </main>
      );
    }

    ReactDOM.render(<QuoteMachine />, document.getElementById('root'));
  </script>

  <!-- FCC test suite -->
  <script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>
</body>
</html>
